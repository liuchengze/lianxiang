!function(){function t(t){this.data={},this.$ppicture=$("#ppicture"),this.$button_open=$("#ppicture_open"),this.$button_close=$("#ppicture_close"),this.$button_up=$("#ppicture_up"),this.$button_down=$("#ppicture_down"),this.$div_checked=this.$ppicture.find("div.pp-checked"),this.$ul=$("#ppscroll_ul"),this.maxShowNumber=4,this.currentIndex=1,this.windowIndex=1,this.page=1,this.totalPage=1,this.totalCount=0,t&&this.init()}t.prototype={constructor:t,init:function(){$(window).height()>=850&&this.$ppicture.addClass("ppicture-800"),this.totalCount=this.$ul.find(">li").length,this.totalCount==this.maxShowNumber?this.totalPage=1:this.totalPage=parseInt(this.totalCount/this.maxShowNumber)+1,this.bindEvent()},bindEvent:function(){var t=this;this.$button_open.on("click",function(){$("html, body").css("overflow","hidden"),t.$ppicture.show()}),this.$button_close.on("click",function(){$("html, body").css("overflow","auto"),t.$ppicture.hide()}),this.$ul.on("click","li",function(){var e=$(this),o=parseInt(e.attr("data-index"));t.showWithIndex(o)}),this.$button_up.on("click",function(){if(t.currentIndex<=1)return!1;1==t.windowIndex?t.gotoPrevPage():t.showWithIndex(t.currentIndex-1)}),this.$button_down.on("click",function(){if(t.currentIndex>=t.totalCount)return!1;t.windowIndex==t.maxShowNumber?t.gotoNextPage():t.showWithIndex(t.currentIndex+1)})},showWithIndex:function(t){var e=this.$ul.find("li").eq(t-1);this.currentIndex=t,this.getWindowIndex(),this.setCheckImage(),this.showBigImage(e.find("img").first().attr("src"))},gotoNextPage:function(){if(this.page>=this.totalPage)return!1;this.$ul.css("top","-="+110*this.maxShowNumber),this.page++,this.showFirstImage()},gotoPrevPage:function(){if(this.page<=1)return!1;this.$ul.css("top","+="+110*this.maxShowNumber),this.page--,this.showMaxImage()},showBigImage:function(t){var e=this.$ppicture.find(".pp-right img.show"),o=this.$ppicture.find(".pp-right img.normal"),n=this.getBigPicSrc(t);e.removeClass("show").addClass("normal"),o.attr("src",n).removeClass("normal").addClass("show")},getBigPicSrc:function(t){var e=this.$ppicture.hasClass("ppicture-800")?800:650;return t.replace(/w\d{2,3}\.(jpg|png|jpeg)$/gi,"w"+e+".$1")},getWindowIndex:function(){return this.windowIndex=this.currentIndex-(this.page-1)*this.maxShowNumber},setCheckImage:function(){this.$div_checked.css("top",110*(this.windowIndex-1)+10)},showFirstImage:function(){this.currentIndex=(this.page-1)*this.maxShowNumber+1;var t=this.$ul.find("li").eq(this.currentIndex-1);this.getWindowIndex(),this.setCheckImage(),this.showBigImage(t.find("img").first().attr("src"))},showMaxImage:function(){this.currentIndex=this.page*this.maxShowNumber;var t=this.$ul.find("li").eq(this.currentIndex-1);this.getWindowIndex(),this.setCheckImage(),this.showBigImage(t.find("img").first().attr("src"))}},1==PDUtil.isRunInNode()&&module&&module.exports?module.exports=t:(window.components||(window.components={}),window.components.BigPicture=t)}(),function(){function t(t){this.data={all:[]},this.$container=$("#container_zengpin"),this.$box=$("#div_zengpin"),this.$box_kxzp=$("#div_kexuan"),this.$box_check=$("#div_check"),this.$a_edit_gifts=$("#a_edit_gifts"),t&&this.init()}t.prototype={constructor:t,init:function(){this.getAllData(),this.renderDom(),this.bindEvent()},renderDom:function(t){for(var e=t||this.data.all,o="",n=0;n<e.length;n++){var i=e[n];o+='<div class="item checked"><img src="'+PDUtil.cutPicturePath(i.path,48)+'" class="item-big-img"/><span class="item-text" title="'+i.goodsName+'">'+i.goodsName+"</span></div>"}o.length>0&&(this.$box.append(o),this.$container.removeClass("hidden"))},bindEvent:function(){var t=this;t.$box_check.on("click",function(){var e=t.$box_kxzp.height();t.$box_check.hide(),t.$box_kxzp.css({width:10,height:10}).show(),t.$box_kxzp.animate({width:"570",height:e})}),t.$a_edit_gifts.on("click",function(){var e=t.$box_kxzp.height();t.$a_edit_gifts.hide(),t.$box_kxzp.css({width:10,height:10}).show(),t.$box_kxzp.animate({width:"570",height:e})})},getAllData:function(){var t=$p.processBXZPNeedShowList();return this.data.all=t,t},emptyBoxDom:function(){this.$box.empty()},show:function(){this.$container.removeClass("hidden")},hide:function(){this.$container.addClass("hidden")},showCheckButton:function(){this.$a_edit_gifts.hide(),this.$box_check.show()},showEditButton:function(){this.$a_edit_gifts.show(),this.$box_check.hide()}},window.components||(window.components={}),window.components.BiXuanZengPin=t}(),function(){function t(t){this.data={},this.$container=$("#container_buygroup"),this.$button_buy=$("#ljgm"),this.$button_notice=$("#dhtz"),this.$button_shoppingcart=$("#jrgwc"),this.$span_stock=$("#span_stock_dec"),this.$box_ewm=$("#box_ewm"),t&&this.init()}t.prototype={constructor:t,init:function(){this.__initEWM(),this.__initPrice(),this.__initBuyButton(),this.__initShoppingcartButton(),$p.processNoticeButton().isShow&&this.__initNoticeButton(),this.bindEvent()},__initBuyButton:function(){this.refreshBuyButton()},refreshBuyButton:function(){var t=$p.processBuyButton(),e=t.isDisabled?null:n;this.setBuyButton(t.showText,t.isDisabled,e),t.isShow&&this.$button_buy.show(),!t.isDisabled&&$p.baseInfo.stock>0&&this.$span_stock.text("有库存")},__initNoticeButton:function(){function t(){var e=/^1[34578]\d{9}$/,o=$.trim($("#notice_phoneNumber").val()),n=PDUtil.getCookie("leid");return""==o?(alert("请输入手机号"),!1):e.test(o)?void $p.jsonpNoticeSendSms({mobile:o,leId:n},function(e){if(1==e.success){var o=119;$("#notice_getVerificationCode").off("click").val("已发送(120)");var n=setInterval(function(){$("#notice_getVerificationCode").val("已发送("+o+")"),0==o&&($("#notice_getVerificationCode").on("click",t).val("获取验证码"),clearInterval(n)),o--},1e3)}else alert(e.resultMsg)}):(alert("请输正确的手机号"),!1)}config_grq[env][plat].sendsms;this.$button_notice=$('<button class="button button-add" id="button_dhtz">到货通知</button>'),$("#ljgm").after(this.$button_notice),this.$button_notice.on("click",function(){$("#notice_box").show(),$("#layer_zhezhao").show()}),$("#notice_box .close").on("click",function(){$("#notice_box").hide(),$("#layer_zhezhao").hide()}),$("#notice_getVerificationCode").on("click",t);var e=1;$("#notice_savePhoneNumber").on("click",function(){if(0!=e){e=0;var t=$.trim($("#notice_verificationCode").val());if(""==t)return e=1,void alert("请输入验证码");var o=$.trim($("#notice_phoneNumber").val()),n=passport.cookie?passport.cookie.loginName:"",i=passport.cookie?passport.cookie.lenovoId:"",s=PDUtil.getCookie("leid");$p.jsonpNoticeSave({productCode:code,activityType:$p.baseInfo.activityType,clientType:"PC",linkAddress:window.location.href,phone:o,smsCode:t,lenovoAccount:n,lenovoID:i,leID:s,mallName:"联想官网"},function(t){1==t.success?($("#notice_box").hide(),$("#layer_zhezhao").hide(),e=1,alert("订阅成功")):(e=1,alert(t.resultMsg))},function(){e=1,alert("系统繁忙")})}})},__initShoppingcartButton:function(){$p.processAddCartButton().isShow&&(this.$button_shoppingcart.off("click"),this.setAddCartButtonClickHandler().show())},__initPrice:function(){e($p.processShowPrice().showText)},__initEWM:function(){var t=!1,e='<div id="box_ewm" class="ewm_tk"><img class="bottom_ewm" src="xiaoxin/images/xxewm.png" /><div class="triangle"></div><div class="ewm_title">联想商城APP</div>';$p.baseInfo.extensionTerminal.indexOf("app")<0&&$p.baseInfo.extensionContent&&(t=!0,e+='<div class="ewm_yh">'+$p.baseInfo.extensionContent+"</div>"),e+="</div>",this.$container.find("div.detail_con span:eq(0)").after(e),this.$box_ewm=$("#box_ewm"),t&&this.$box_ewm.show()},bindEvent:function(){var t=this,e=$("#buy_number");$("#reduce_buy_number").on("click",function(){var o=parseInt(e.val());if(o-1<=0)return!1;e.val(--o),t.updatePrice($p.calcPrice())}),$("#add_buy_number").on("click",function(){var o=parseInt(e.val());if(o+1>$p.baseInfo.gmsl)return!1;e.val(++o),t.updatePrice($p.calcPrice())}),e.on("change",function(){var o=parseInt(e.val());isNaN(o)||o<=0?(e.val(1),t.updatePrice($p.calcPrice())):o>$p.baseInfo.gmsl?(e.val($p.baseInfo.gmsl),alert("当前商品最多只能购买"+$p.baseInfo.gmsl+"个")):t.updatePrice($p.calcPrice())}),this.$container.find("div.detail_con span:eq(0)").on("mouseover",function(){$(this).next().show()}).on("mouseleave",function(){$(this).next().hide()}),$(document).on("click",function(){t.$box_ewm.is(":visible")&&t.$box_ewm.hide()})},updatePrice:function(t){e(t)},getBuyNumber:function(){var t=$("#buy_number").val();return/^[1-9][0-9]*$/.test(t)?parseInt(t):1},setBuyButton:function(t,e,o,n){var i={event:"click",type:"replace"};return n=$.extend(i,n||{}),this.$button_buy.text(t||"立即购买").attr("title",t||"立即购买"),e?this.$button_buy.addClass("button-gray").off("click"):(this.$button_buy.removeClass("button-gray"),o&&"function"==typeof o&&("replace"==n.type?this.$button_buy.off(n.event).on(n.event,o):this.$button_buy.on(n.event,o))),this.$button_buy},setAddCartButtonClickHandler:function(t){return this.setButtonClickHandler(this.$button_shoppingcart,t,i)},setBuyButtonClickHandler:function(t){return this.setButtonClickHandler(this.$button_buy,t,n)},setButtonClickHandler:function(t,e,o){return e?t.on("click",e):t.on("click",o),t},ljgm:function(){n()},jrgwc:function(){i()},ljyy:function(){if(window.passport&&passport.isLogin())$p.jsonpShangouYuyue(function(t){"0"==t.rc?($p.components.title.reservationId=t.reservationId,$("#layer_zhezhao, #window_shangouyy").fadeIn(500),$p.components.buygroup.setBuyButton("已预约",!0)):alert(t.msg||"系统正忙, 请稍后再试!")});else try{passport.show(),passort.loginRedirect=window.location.href}catch(t){PDUtil.warn("失败。。")}},ljgm_sg:function(){var t=window.$p,e=window.PDUtil;if(window.passport&&passport.isLogin())2==t.baseInfo.activityType&&(!t.activity.ShanGou||1!=t.activity.ShanGou.type&&2!=t.activity.ShanGou.type||t.jsonpIsBookUser(function(e){0==e.rc?1==e.status?window.location.href=config_grq[env][plat].gwc+"directbuy.jhtml?ss="+(new Date).getMilliseconds()+"&itemtype=0&gcodes="+code+"&icount="+t.components.buygroup.getBuyNumber()+"&terminal="+t.terminal:alert("你未预约该商品，没有购买资格!"):alert("系统正忙，请稍后再试!")},function(){alert("系统正忙，请稍后再试!")}));else try{passport.show(),passort.loginRedirect=c_url}catch(t){e.warn("调用登录信息失败")}}};var e=function(t){var e=parseFloat(t);isNaN(e)?($("#price_unit").text(""),$("#span_price").text(t)):($("#price_unit").text("RMB"),$("#span_price").text(e.toFixed(2)))},o=function(){for(var t=[code],e=$p.components.tjxj.data.selectedArray,o=0;o<e.length;o++)t.push(e[o].code);return t},n=function(){if(!$p.components.guige.isExist_gg())return!1;var t=o(),e=t.length>1?2:0,n=config_grq[env][plat].gwc+"directbuy.jhtml?ss="+(new Date).getMilliseconds()+"&itemtype="+e+"&gcodes="+t.join(",")+"&icount="+$("#buy_number").val()+"&opgcode="+$p.components.kxzp.getKXZP().join()+"&servicecode="+$p.components.service.getSelectedService().join()+"&customids="+$p.components.srdz.getdz()+"&sharecode="+$p.shareCode+"&terminal="+$p.terminal;if(90==$p.baseInfo.buOwner){if(""==$("#showpop").val())return alert("请选择号码"),!1;var i=$("div.de_info_section1 .de_sec_main").eq(1).find("span.active").attr("code");n+="&phoneServiceNumber="+$("#showpop").val()+"&dpackageId="+i,n+="&goodsId="+$("#showpop").attr("goodsid")}if($p.isLcodeProduct()){n+="&kcode="+$p.baseInfo.LCode}switch($p.baseInfo.salesType){case"5":n="custommade.html?code="+$p.gcode}window.passport&&window.passport.isLogin()?($p.activity&&1==$p.baseInfo.activityType&&1==$p.activity.purchaseLimiting&&$p.jsonpIsTuangouUser(function(t){0==t.rc&&1==$p.activity.hasPurchased&&($p.components.buygroup.setBuyButton("您已参团",!0),alert("您已参团"))}),window.location.href=n):(window.passport.show(),window.passport.loginRedirect=n)},i=function(){if(!$p.components.guige.isExist_gg())return!1;var t=o(),e=t.length>1?2:0;$p.jsonpAddItemToCart({terminal:$p.terminal,itemtype:e,gcodes:t.join(","),opgcode:$p.components.kxzp.getKXZP().join(),servicecode:$p.components.service.getSelectedService().join(),customids:$p.components.srdz.getdz(),icount:$("#buy_number").val()},function(t){0==t.rc?window.location.href=config_grq[env][plat].gwc+"getcart.jhtml?plat="+$p.terminal:(window.PDUtil.warn("additemtocart return data fail"+t.rc),alert("加入购物车失败，请稍后再试"))})};window.components||(window.components={}),window.components.BuyGroup=t}(),function(){function t(t){this.data={},this.$container=$("#container_guige"),t&&this.init()}var e=window.specInfo;t.prototype={constructor:t,init:function(){this.bindEvent(),this.__setGuige()},__setGuige:function(){$p.fn_Specifications.SpecificationsRels=e;var t=[];$.each(e,function(e,o){var n={typeid:o.typeid,gsdlist:[]};$.each(o.gsdlist,function(t,e){var o=!0;$.each(n.gsdlist,function(t,n){n.gsdId==e.gsdId&&(o=!1)}),o&&n.gsdlist.push({gsdId:e.gsdId})}),t.push(n)}),$p.fn_Specifications.SpecificationsRelList=t,$p.fn_Specifications.valeDefault(code,function(t){$("#"+t).addClass("checked").removeClass("item-disabled").css("background","")})},bindEvent:function(){var t=$(".box",this.$container),e=this;$(".box > div.item",this.$container).off("click").on("click",function(){if($(this).hasClass("item-disabled"))return!1;if(t.find("div.checked").length==t.length)var o=1;else var o=0;$(this).hasClass("checked")?$(this).removeClass("checked"):($(this).siblings(".checked").removeClass("checked"),1==o&&e.$container.find(".box > div.item").removeClass("checked"),$(this).addClass("checked")),e.$container.find("div.item-disabled").removeClass("item-disabled").attr("style","");var n=[];if(e.$container.find("div.item.checked").each(function(){n.push({typeid:$(this).parent().attr("typeid"),gsdId:$(this).attr("id")})}),$p.fn_Specifications.valeDisabled(n,function(t){$("#"+t).addClass("item-disabled").removeClass("checked").css("background","rgb(153, 153, 153)")}),$p.fn_Specifications.SpecificationsRelList.length==n.length){var i=$p.fn_Specifications.getgcode(n);window.location.href=i+".html"}})},isExist_gg:function(){var t=!1,e=window.specInfo;if(e instanceof Array){var o=e.length;$("#container_guige div.box > div.checked").length==o?t=!0:alert("请选中规格")}return t}},window.components||(window.components={}),window.components.Guige=t}(),function(){function t(t){this.data={all:[]},this.$container=$("#container_hotlist"),this.$box=$("#div_hotlist"),t&&this.init()}t.prototype={constructor:t,init:function(){var t=this;this.getAllData(function(){t.renderDom(),t.bindEvent()})},renderDom:function(){var t=this.data.all,e="";if(0==t.length)return!1;for(var o=0;o<3;o++){var n=2==o?" noborder":"",i=t[o];e+='<div class="hot_item'+n+'"><a class="hot-item" href="'+i.detailUrl+'" target="_blank" latag="latag_pc_detail_topseller1_'+i.code+'"><img src="'+(i.path||"")+'" class="hot_pic"/><div class="hot_picTitle" title="'+i.name+'">'+i.name+'</div><div class="hot_picDec">'+(i.brief||"")+'</div><div class="hot_picMoney">RMB '+i.price+"</div></a></div>"}e.length>0&&(this.$box.append(e),this.$container.removeClass("hidden"))},bindEvent:function(){},getAllData:function(t){var e=this;$p.loadHostList({},function(o){200==o.status&&(e.data.all=o.data),t&&t(o.data)})}},window.components||(window.components={}),window.components.HotList=t}(),function(){function t(t){this.data={all:[],selectedArray:[]},this.$box=$("#div_kexuan"),this.$button_ok=$("#button_checkgifts_ok"),this.$button_cancel=$("#button_checkgifts_cancel"),this.$a_close=$("#a_close_chose"),t&&this.init()}t.prototype={constructor:t,init:function(){this.getAllData(),this.renderDom(),this.bindEvent()},renderDom:function(){for(var t=$p.components.bxzp.data.all,e=this.data.all,o="",n=0;n<t.length;n++){var i=t[n];o+='<ul class="item-list"><span class="order">'+(n+1)+'</span><li class="checked" data-code="'+i.code+'"><img class="img" title="'+i.goodsName+'" src="'+PDUtil.cutPicturePath(i.path,70)+'" /></li><span class="name">'+i.goodsName+"</span></ul>"}o+='<ul class="item-list kxzp"><span class="order">'+(n+1)+"</span>";for(var s=0;s<e.length;s++)o+='<li data-code="'+e[s].code+'"><img class="img" title="'+e[s].goodsName+'" src="'+PDUtil.cutPicturePath(e[s].path,70)+'" /></li>';o+='<span class="name">请选择一个赠品</span></ul>',o.length>0&&this.$box.find(".box-body").append(o)},bindEvent:function(){var t=this;t.$a_close.on("click",function(){t.closeCheckBox()}),t.$button_cancel.on("click",function(){t.closeCheckBox()}),t.$box.find(".box-body ul.kxzp li").on("click",function(){var e=$(this);if(!e.hasClass("checked")){var o=e.attr("data-code"),n=e.siblings(".checked").removeClass("checked");t.data.selectedArray=PDUtil.dropSome(t.data.selectedArray,function(t){return t.code==n.attr("data-code")});if(!PDUtil.findFirst(t.data.selectedArray,function(t){return t.code==o})){var i=PDUtil.findFirst(t.data.all,function(t){return t.code==o});t.data.selectedArray.push(i),e.parent().find("span.name").text(i&&i.goodsName)}e.addClass("checked")}}),t.$button_ok.on("click",function(){var e=$p.components.bxzp;t.data.selectedArray.length>0?(e.emptyBoxDom(),e.renderDom(e.data.all.concat(t.data.selectedArray)),t.closeCheckBox()):alert("请选择一个赠品！")})},getAllData:function(){var t=$p.processKXZPNeedShowList();return this.data.all=t,t},getKXZP:function(){for(var t=[],e=0;e<this.data.selectedArray.length;e++)t.push(this.data.selectedArray[e].code);return t},closeCheckBox:function(){var t=this,e=this.$box;e.animate({width:10,height:10},function(){e.removeAttr("style").hide(),0==t.data.selectedArray.length?$p.components.bxzp.showCheckButton():$p.components.bxzp.showEditButton()})}},window.components||(window.components={}),window.components.KeXuanZengPin=t}(),function(){function t(t){this.data={},this.$container=$("#container_cuxiao"),this.$box=$("#div_promotion"),this.reservationId=0,t&&this.init()}var e=0;t.prototype={constructor:t,init:function(){this.renderDom()},renderDom:function(){var t=$p.baseInfo;this.$box.empty();var o=$p.promotion,n=$p.activity,i=$p.nowNumber;o&&(this.setXDLJ(o,i),this.setMJ(o,i)),n&&(this.setXSQG(n,i),this.setShangou(n,i)),this.setPresell(),t.pcPromotion&&(this.$box.append('<div id="pc_promotion">'+t.pcPromotion+"</div>"),e++),t.extensionTerminal.indexOf("pc")!=-1&&t.extensionContent&&(this.$box.append('<div id="pc_extensionContent">'+t.extensionContent+"</div>"),e++),e&&this.$container.removeClass("hidden")},setXDLJ:function(t,o){if(t.saleReduction&&o<t.saleReduction.totime){e++,this.$box.append('<div class="promotion-box" id="promotion_xdlj"><span class="title">下单立减</span><div class="promotion-body"><span class="des">&nbsp;</span><span class="djs">&nbsp;</span></div></div>');var n=$("#promotion_xdlj span.des"),i=$("#promotion_xdlj span.djs");o<t.saleReduction.fromtime?n.html("下单立减"+t.saleReduction.discountAmount+"元，活动开始时间："+t.saleReduction.fromtimeStr):(n.html("下单立减"+t.saleReduction.discountAmount+"元"),PDUtil.timer(t.saleReduction.totime-o,function(t){i.html("距离结束时间还有："+t)},function(){i.hide()}))}},setMJ:function(t,o){if(t.fullReduction&&o>t.fullReduction.fromtime&&o<t.fullReduction.totime){e++;for(var n='<div class="promotion-box" id="promotion_mj"><span class="title">满&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;减</span><div class="promotion-body clearfix"><ul>',i=t.fullReduction.fullsetList,s=0;s<i.length;s++)n+="<li>满"+i[s].full+"减"+i[s].reduce+"</li>";n+="</ul></div></div>",this.$box.append(n)}},setPresell:function(){function t(){a.loadPresellInfo({},function(t){if(t&&t.success){o(t.t||{})}else PDUtil.warn("获取预售信息失败")})}function o(t){if(1!=t.disabled)return!1;if(t.terminalname&&t.terminalname.indexOf("PC")<0)return a.components.buygroup&&a.components.buygroup.setBuyButton("商品不在该平台预售",!0),!1;if(c.show(),1==t.presellway&&(t.deposit=a.baseInfo.price),d.html("定金："+t.deposit),t.activitystarttime_date=new Date(t.activitystarttime.replace(/-/g,"/")),t.activityendtime_date=new Date(t.activityendtime.replace(/-/g,"/")),t.presellstarttime_date=new Date(t.presellstarttime.replace(/-/g,"/")),t.currentdatetime_date=new Date(t.currenttime.replace(/-/g,"/")),t.currentdatetime_date<t.presellstarttime_date)t.process=1,n(t);else if(t.currentdatetime_date>=t.presellstarttime_date&&t.currentdatetime_date<t.activityendtime_date){if(t.process=2,a.baseInfo.stock<=0)return a.components.buygroup.setBuyButton("已售罄",!0),!1;i(t)}else t.process=3,s()}function n(e){a.components.buygroup.setBuyButton("敬请期待",!0),PDUtil.timer(e.presellstarttime_date-e.currentdatetime_date,function(t){r.html("距离预售正式开始还有："+t)},function(){r.html(""),t()})}function i(e){var o=1==e.presellway?"支付全款":"支付定金";a.components.buygroup.setBuyButton(o,!1).off("click"),a.components.buygroup.setBuyButtonClickHandler(),PDUtil.timer(e.activityendtime_date-e.currentdatetime_date,function(t){r.html("距离定金支付结束还有："+t)},function(){r.html(""),t()})}function s(){a.components.buygroup.setBuyButton("预售结束",!0),d.html("预售结束"),r.html("")}var a=window.$p;if(2!=a.baseInfo.salesType)return!1;if(0==a.baseInfo.marketable)return!1;e++,this.$box.append('<div class="promotion-box" id="promotion_presell" style="display:none;"><span class="title">预&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;售</span><div class="promotion-body"><span class="des">定金：</span><span class="djs">&nbsp;</span><a style="cursor: pointer; float: right; height: 23px; line-height: 23px; font-size: 14px;" target="_blank" href="/product/pd_comp/html/presell_info.html">预售规则&gt;&gt;</a></div></div>');var c=$("#promotion_presell"),r=$("#promotion_presell span.djs"),d=$("#promotion_presell span.des");t()},setXSQG:function(t,o){function n(){$p.loadProductInfo(function(){i($p.activity.flushSaleJson)},function(){alert("暂时无法获取活动信息， 请刷新页面重试")})}function i(t){"IN"==t.status?(s.html(""),$p.components.buygroup.refreshBuyButton(),PDUtil.timer(t.totime-o,function(t){s.html("距离结束时间还有: "+t)},function(){n()})):"BEFORE"==t.status?($p.components.buygroup.refreshBuyButton(),s.html(t.fromtimeStr+" 开始进行限时抢购")):($p.baseInfo.showPrice=$p.baseInfo.price,$p.components.buygroup.updatePrice($p.baseInfo.price),s.html("限时抢购已经结束"),$p.components.buygroup.refreshBuyButton(),$p.baseInfo.stock>0&&($p.components.buygroup.$button_shoppingcart.off("click"),$p.components.buygroup.setAddCartButtonClickHandler().show()))}if("3"!=$p.baseInfo.activityType)return!1;if($p.activity&&$p.activity.flushSaleJson&&"AFTER"==$p.activity.flushSaleJson.status)return!1;e++,this.$box.append('<div class="promotion-box" id="promotion_xsqg"><span class="title">限时抢购</span><div class="promotion-body"><span class="des">&nbsp;</span><span class="djs">&nbsp;</span></div></div>');var s=$("#promotion_xsqg span.des");i(t.flushSaleJson)},setShangou:function(){function t(){$p.loadProductInfo(function(){o()},function(){alert("暂时无法获取活动信息， 请刷新页面重试!")})}function o(){var e=window.$p,o=window.PDUtil,n=e.activity.ShanGou,c=e.nowNumber;switch(n.type){case 0:c<n.startNumber?(e.components.buygroup.setBuyButton("闪购未开始",!0),o.timer(n.startNumber-c,function(t){s.html("距离闪购开始时间: "+t)},function(){s.html("闪购结束时间: "+n.endTimeStr),a.html("");try{e.baseInfo.stock>0?e.components.buygroup.setBuyButton("立即购买",!1,e.components.buygroup.ljgm):e.components.buygroup.setBuyButton("已售罄",!0)}catch(t){}})):c>n.startNumber&&c<n.endNumber?(s.html("闪购结束时间: "+n.endTimeStr),e.baseInfo.stock>0&&e.components.buygroup.setBuyButton("立即购买",!1,e.components.buygroup.ljgm),o.timer(n.endNumber-c,function(t){a.html("距离闪购结束时间: "+t)},function(){s.html("闪购已结束"),a.html(""),e.components.buygroup.setBuyButton("闪购已结束",!0)})):(i.hide(),e.components.buygroup.setBuyButton("闪购已结束",!0));break;case 1:c<n.yystartNumber?(s.html("预约开始时间: "+n.yystartTimeStr),a.html(""),e.components.buygroup.setBuyButton("预约未开始",!0)):c>=n.yystartNumber&&c<=n.yyendNumber?(s.html("预约结束时间: "+n.yyendTimeStr),a.html(""),window.passport&&passport.isLogin()?e.jsonpIsBookUser(function(t){"0"==t.rc&&"1"==t.status?e.components.buygroup.setBuyButton("已预约",!0):e.components.buygroup.setBuyButton("立即预约",!1,e.components.buygroup.ljyy)}):e.components.buygroup.setBuyButton("立即预约",!1,e.components.buygroup.ljyy)):c>n.yyendNumber&&c<n.startNumber?(s.html("闪购开始时间: "+n.startTimeStr),a.html(""),e.components.buygroup.setBuyButton("闪购未开始",!0),o.timer(n.startNumber-c,function(t){a.html("距离闪购开始时间: "+t)},function(){e.baseInfo.stock>0?e.components.buygroup.setBuyButton("立即购买",!1,e.components.buygroup.ljgm_sg):e.components.buygroup.setBuyButton("已售罄",!0),s.html("闪购结束时间: "+n.endTimeStr),a.html("")})):c>n.startNumber&&c<n.endNumber?(s.html("闪购结束时间: "+n.endTimeStr),a.html(""),e.baseInfo.stock>0?e.components.buygroup.setBuyButton("立即购买",!1,e.components.buygroup.ljgm_sg):e.components.buygroup.setBuyButton("已售罄",!0)):(i.hide(),e.components.buygroup.setBuyButton("闪购已结束",!0));break;case 2:c<n.yystartNumber?(s.html("预约开始时间: "+n.yystartTimeStr),a.html(""),e.components.buygroup.setBuyButton("预约未开始",!0),o.timer(n.yystartNumber-c,function(t){a.html("距离预约开始时间: "+t)},function(){t()})):c>n.yystartNumber&&c<n.yyendNumber?(s.html("预约结束时间:"+n.yyendTimeStr),a.html(""),window.passport&&passport.isLogin()?e.jsonpIsBookUser(function(t){"0"==t.rc?"1"==t.status?e.components.buygroup.setBuyButton("已预约",!0):e.components.buygroup.setBuyButton("立即预约",!1,e.components.buygroup.ljyy):alert("抱歉，您没有预约！")}):e.components.buygroup.setBuyButton("立即预约",!1,e.components.buygroup.ljyy),o.timer(n.yyendNumber-c,function(t){a.html("距离预约结束时间: "+t)},function(){t()})):c>n.yyendNumber&&c<n.startNumber?(s.html("预约闪购开始时间: "+n.startTimeStr+"<br/>非预约闪购开始时间: "+n.fyyStartTimeStr),a.html(""),e.components.buygroup.setBuyButton("闪购未开始",!0),o.timer(n.startNumber-c,function(t){a.html("距离闪购开始时间: "+t)},function(){t()})):c>n.startNumber&&c<n.fyyStartNumber?window.passport&&passport.isLogin()?e.jsonpIsBookUser(function(t){"0"==t.rc&&"1"==t.status?(s.html("闪购结束时间: "+n.endTimeStr),a.html(""),e.baseInfo.stock>0?e.components.buygroup.setBuyButton("立即购买",!1,e.components.buygroup.ljgm):e.components.buygroup.setBuyButton("已售罄",!0)):(s.html("非预约闪购开始时间: "+n.fyyStartTimeStr),a.html(""),e.components.buygroup.setBuyButton("闪购未开始",!0),o.log("用户没有预约"))}):(s.html("闪购结束时间: "+n.endTimeStr+"<br/>非预约闪购开始时间: "+n.fyyStartTimeStr),a.html(""),e.baseInfo.stock>0?e.components.buygroup.setBuyButton("立即购买",!1,e.components.buygroup.ljgm):e.components.buygroup.setBuyButton("已售罄",!0)):c>n.fyyStartNumber&&c<n.endNumber?(s.html("闪购结束时间:"+n.endTimeStr),a.html(""),e.baseInfo.stock>0?e.components.buygroup.setBuyButton("立即购买",!1,e.components.buygroup.ljgm):e.components.buygroup.setBuyButton("已售罄",!0)):(i.hide(),e.components.buygroup.setBuyButton("闪购已结束",!0))}}if(0==$p.isShowShangou())return!1;if($p.activity&&$p.activity.ShanGou&&$p.activity.ShanGou.endNumber&&$p.nowNumber>$p.activity.ShanGou.endNumber)return!1;var n=this;!function(){$("#wsgyy_close").on("click",function(){$("#layer_zhezhao, #window_shangouyy").fadeOut(500)}),$("#wsgyy_ok").on("click",function(){var t=$("#wsgyy_tel").val();PDUtil.checkTelNo(t)?$p.jsonpSaveBookShangouTel({reservationId:n.reservationId,phone:t},function(t){0==t.rc?(alert("保存成功!"),$("#wsgyy_close").trigger("click")):(alert("保存失败，请稍后再试!"),$("#wsgyy_close").trigger("click"))}):alert("请输入正确的手机号")})}();e++,this.$box.append('<div class="promotion-box" id="promotion_shangou"><span class="title">闪&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;购</span><div class="promotion-body"><span class="des">&nbsp;</span><span class="djs">&nbsp;</span></div></div>');var i=$("#promotion_shangou"),s=$("#promotion_shangou span.des"),a=$("#promotion_shangou span.djs");o()}},window.components||(window.components={}),window.components.PromotionInfo=t}(),function(){function t(t){this.data={},this.$detail_main=$("#detail_main"),this.$detail_left=$("#detail_left"),this.$detail_right=$("#detail_right"),t&&this.init()}var e=window.passport;t.prototype={constructor:t,init:function(){e.load?e.load(function(){o.init()}):o.init(),this.__initShare(),this.__initFloat()},__initShare:function(){var t=void 0;(null==navigator.userAgent.match("lenovomallapp")?0:1)||($(".share_box").after($(".share_box").clone().attr("id","share_box_unlogin").hide()),$("#share_box_unlogin").on("click",function(){e.show(),$(".share_box").hide()})),$("#div_share").on("mouseover",function(){if($(".share_box").show(),e.isLogin()){$("#share_box_unlogin").hide();var o="";o=$p.baseInfo.pcPromotion?$("#pc_promotion").text():$("#div_product_dec").text(),t={url:location.protocol+"//"+location.host+location.pathname+"?sharecode="+e.cookie.lenovoId+"&promotionType=0",title:$("#span_product_name").text(),summary:o,pic:$("#winpic").attr("src")},$("#share_box_unlogin").hide(),window.jiathis_config=t}else $("#share_box_unlogin").show()}).on("mouseleave",function(){$(".share_box").hide()}),window.jiathis_config=t},__initFloat:function(){var t=this,e=$(document),o=1,n=0;$(window).on("scroll",function(){var i=t.$detail_main.offset(),s=i.top,a=0;if(t.$detail_left.height()+10>t.$detail_main.height())return!1;var c=e.scrollTop();if(c<=s){if(n=1,o==n)return!1;o=n,t.$detail_left.removeClass("absolute").removeClass("fixed").removeAttr("style")}else if(a=s+t.$detail_main.height(),c+t.$detail_left.height()<a){if(n=2,o==n)return!1;o=n,t.$detail_left.removeClass("absolute").addClass("fixed").css({top:0})}else{if(n=3,o==n)return!1;o=n;var r=t.$detail_main.height()-t.$detail_left.height();t.$detail_left.removeClass("fixed").addClass("absolute").css({top:r})}})},shareInit:function(){var t=void 0;(null==navigator.userAgent.match("lenovomallapp")?0:1)||($(".share_box").after($(".share_box").clone().attr("id","share_box_unlogin").hide()),$(".share_box_unlogin").on("click",function(){e.show(),$(".share_box").hide()}),$(".de_share").on("mouseover",function(){e.isLogin()?(t={url:window.location.href+"?sharecode="+e.cookie.lenovoId+"&promotionType=0",title:$("#span_product_name").text(),summary:$("#div_product_dec").text(),pic:$.trim($("#winpic").attr("src"))},$(".share_box_unlogin").hide(),window.jiathis_config=t):$("#share_box_unlogin").show()})),window.jiathis_config=t}};var o={$sc:$("#a_sc"),init:function(){this.$sc=$("#a_sc"),e&&e.isLogin()?o.p_get("findfavorites.do?ss=",o.suc):o.$sc.removeClass("sc").off("click").on("click",function(){e.show(),e.loginRedirect=window.location.href})},p_get:function(t,o){e&&e.isLogin()?$p.loadMyFavorite({url:t},o):(e.show(),e.loginRedirect=window.location.href)},suc:function(t){"0"==t.rc?o.removeFavorites():o.addFavorites()},addFavorites:function(){o.$sc.removeClass("sc").off("click").on("click",{type:"add"},o.doSC)},removeFavorites:function(){o.$sc.addClass("sc").off("click").on("click",o.doSC)},doSC:function(t){t.data&&"add"===t.data.type?o.p_get("addfavorites.do?ss=",function(t){"0"==t.rc&&o.removeFavorites()}):o.p_get("deletefavorites.do?ss=",function(t){"0"==t.rc&&o.addFavorites()})}};window.components||(window.components={}),window.components.ScrollPicture=t}(),function(){function t(t){this.data={allService:[],all:[],selectedArray:[]},this.$box=$("#div_service"),this.$container=$("#container_service"),t&&this.init()}t.prototype={constructor:t,init:function(){var t=this;this.loadData(function(){t.data.allService.length>0&&(t.renderDom(),t.bindEvent())})},loadData:function(t){var e=this;$p.loadServiceInfo({},function(o){if(200==o.status&&o.data.length>0){e.data.all=o.data;var n=e.formatServiceData(o.data);e.data.allService=n,t&&t()}})},renderDom:function(){for(var t="",e=0;e<this.data.allService.length;e++){var o=this.data.allService[e],n=o.list.length>1?'<span class="bg arrows"></span>':" ";if(t+='<div class="item" data-code="'+o.list[0].code+'" latag="latag_pc_detail_chooseservice_'+code+"_"+o.list[0].code+'"><div class="service-option"><span class="bg icon_bg"></span><span class="service-name">'+o.list[0].serviceGoodsName+'</span><span class="service-price"> ￥'+o.list[0].price+"</span>"+n+"</div>",o.list.length>1){t+='<ul class="service-ul">';for(var i=0;i<o.list.length;i++){var s=o.list[i];t+='<li style="display: '+(0==i?"none":"block")+';" data-code="'+s.code+'" latag="latag_pc_detail_chooseservice_'+code+"_"+s.code+'"><div><span class="bg icon_bg"></span><span class="service-name">'+s.serviceGoodsName+'</span><span class="service-price">￥'+s.price+"</span></div></li>"}t+="</ul>"}t+="</div>"}t.length>0&&(this.$box.append(t),this.$container.removeClass("hidden"))},bindEvent:function(){var t=this;this.$box.find(".item").on("mouseover",function(){
$(this).addClass("item-hover")}).on("mouseleave",function(){$(this).removeClass("item-hover")}),this.$box.find(".item").on("click",function(){var e=$(this),o=e.attr("data-code");e.hasClass("checked")?(e.removeClass("checked"),t.removeSelectedService(o)):(e.addClass("checked"),t.addSelectedService(o)),e.removeClass("item-hover");var n=$p.calcPrice();$p.components.buygroup.updatePrice(n)}),this.$box.find(".service-ul > li").on("click",function(){var e=$(this).hide(),o=e.parent().prev(),n=e.siblings(":hidden").show().attr("data-code");t.removeSelectedService(n);var i=e.attr("data-code");t.addSelectedService(i);var s=PDUtil.findFirst(t.data.all,function(t){return t.code==i});o.find("span.service-name").text(s.serviceGoodsName),o.find("span.service-price").text(" ￥"+s.price),o.parent().addClass("checked").attr("data-code",i).attr("latag","latag_pc_detail_chooseservice_"+code+"_"+i).removeClass("item-hover");var a=$p.calcPrice();return $p.components.buygroup.updatePrice(a),!1})},formatServiceData:function(t){for(var e=[{productCode:code,cateCode:t[0].cateCode,categoryName:t[0].categoryName,list:[t[0]]}],o=!1,n=1;n<t.length;n++){o=!1;for(var i=0;i<e.length;i++)if(t[n].cateCode==e[i].cateCode){e[i].list.push(t[n]),o=!0;break}o||e.push({productCode:code,cateCode:t[n].cateCode,categoryName:t[n].categoryName,list:[t[n]]})}return e},getSelectedService:function(){for(var t=[],e=0;e<this.data.selectedArray.length;e++)t.push(this.data.selectedArray[e].code);return t},addSelectedService:function(t){PDUtil.findFirst(this.data.selectedArray,function(e){return e.code==t})||this.data.selectedArray.push(PDUtil.findFirst(this.data.all,function(e){return e.code==t}))},removeSelectedService:function(t){this.data.selectedArray=PDUtil.dropSome(this.data.selectedArray,function(e){return e.code==t})}},window.components||(window.components={}),window.components.Service=t}(),function(){function t(t){this.data={},t&&this.init()}t.prototype={constructor:t,init:function(){},getdz:function(){return""}},window.components||(window.components={}),window.components.Srdz=t}(),function(){function t(t){this.data={all:[],selectedArray:[]},this.$container=$("#container_option"),this.$box=$("#div_tjxj"),t&&this.init()}t.prototype={constructor:t,init:function(){this.getAllData(),this.renderDom(),this.bindEvent()},renderDom:function(){for(var t=window.$p,e=this.data.all,o="",n=0;n<e.length;n++){var i=e[n],s=t.promotion.goodsDetailUrl&&t.promotion.goodsDetailUrl[i.code]||"/product/"+i.code+".html";o+='<div class="item" data-code="'+i.code+'"><img src="'+PDUtil.cutPicturePath(i.path,48)+'" class="item-big-img"/><div class="item-right"><div class="text-normal" title="'+i.goodsName+'">'+i.goodsName+'</div><div><span class="price">￥ '+i.showPrice.toFixed(2)+'</span><a class="detail" href="'+s+'" target="_blank">了解详情></a></div></div></div>'}o.length>0&&(this.$box.append(o),this.$container.removeClass("hidden"))},bindEvent:function(){var t=this;this.$box.find("div.item").on("click",function(){var e=$(this),o=e.attr("data-code");if(e.hasClass("checked"))e.removeClass("checked"),t.data.selectedArray=PDUtil.dropSome(t.data.selectedArray,function(t){return t.code==o});else{e.addClass("checked");PDUtil.findFirst(t.data.selectedArray,function(t){return t.code==o})||t.data.selectedArray.push(PDUtil.findFirst(t.data.all,function(t){return t.code==o}))}var n=$p.calcPrice();$p.components.buygroup.updatePrice(n)})},getAllData:function(){var t=$p.processXJNeedShowList();return this.data.all=t,t},getSelectedCodeArray:function(){for(var t=[],e=0;e<this.data.selectedArray.length;e++)t.push(this.data.selectedArray[e].code);return t}},window.components||(window.components={}),window.components.TuiJianXuanJian=t}();